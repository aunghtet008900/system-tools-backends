2001-04-26  Chema Celorio  <chema@celorio.com>

	* Makefile.am (EXTRA_DIST): add print-conf.in to pass distcheck

2001-04-26  Arturo Espinosa Aldama  <arturo@ximian.com>

	* boot-conf.in: Added mandrake-7.2 and debian-2.2 as supported platforms.
	* disks-conf.in: Added mandrake-7.2 and debian-2.2 as supported platforms.
	* memory-conf.in: Added mandrake-7.2 and debian-2.2 as supported platforms.
	Some indentation corrections.
	* print.pl.in: Escaped a couple of hashes that confused emacs.
	* print-conf.in: Added mandrake-7.2 and debian-2.2 as supported platforms.
	* users-conf.in: Added mandrake-7.2 and debian-2.2 as supported platforms.
	
2001-04-25  Arturo Espinosa Aldama  <arturo@ximian.com>

	* filesys.pl.in (xst_filesys_translate_ext2_device_to_label):
	chomp is the same in this case, and a common idiom. Also,
	always return $label, as "" eq undef.
	Some other style changes.
	(xst_filesys_table_merge_superset): merge stuff missing in
	first table from second one.
	(xst_filesys_table_merge_subset): delete stuff in first table
	missing	in second.
	(xst_filesys_table_to_hash): This made these two possible.
	(xst_filesys_hash_to_table): Don't you love Perl?
	(xst_filesys_info_merge): Merge stuff inside infos.
	(xst_filesys_info_merge_options): And options.
	(merge_hashes): Small utility that makes life more bearable.

2001-04-23  Arturo Espinosa  <arturo@ximian.com>

	* debug.pl.in: minor cosmetic change to path.
	* general.pl.in: require gettext.pl routines and set textdomain
	to "ximian-setup-tools".
	* gettext.pl.in: Removed function N_. This is only a C trick
	to fool the preprocessor. Oh, but this is not C.
	* report.pl.in: Surround strings to be translated by '_()'.
	
2001-04-23  Arturo Espinosa  <arturo@ximian.com>

	* network.pl.in: init.d script for smb in Debian is samba.
	* service.pl.in (xst_service_sysv_get_paths): Added paths for
	  Debian and Mandrake.
	* time-conf.in: Check for service availability and activation.
	  Minor indentation fixes.
	
2001-04-23  Arturo Espinosa  <arturo@ximian.com>

	* parse.pl.in (xst_parse_interfaces_option_str/kw): this code
	  was passing invalid xst_report keys. How did this get here?

	* time-conf.in: redhat-7.0, mdk-7.2 & debian-2.2 parse/replace
	  tables.
	
2001-04-20  Arturo Espinosa  <arturo@ximian.com>

	* report.pl.in (xst_report): As we are killing the format strings
	  from the frontend common code, we pass it in the report now.
	
2001-04-19  Arturo Espinosa  <arturo@ximian.com>

	* file.pl.in (xst_file_run): return -1 if command fails to be found.
	  return system (command) / 256 (as stated in perlfunc) to return exit
	  code of process. Fixed stdio/stderr redirection.
	  (xst_file_locate_tool): return trivialy if path is absolute.
	* network.pl.in: when checking for "smbuse", use new service behaviour
	  to check for smbd and nmbd.
	  Parsing for hosts and dns servers now filters repeated entries out.
	* service.pl.in (xst_service_sysv_get_status): some init.d scripts are broken.
	  Stole redhat's init.d/function:status to do new, more fine-grained checking.
	  (xst_service_sysv_get_status_any): just a proxy.
	  (xst_service_sysv_run_initd_script): fixed init.d script invocation typo.
	  (xst_service_sysv_set_status): Always set links, to fix broken setups.
	* network-conf.in (xml_parse_network, push_unique): when parsing hosts and
	  dns servers, filter repeated entries out.
	* parse.pl.in (xst_parse_split_all_unique_hash_comment,
	  xst_parse_split_first_array_unique): new functions that return arrays with
	  unique elements.
	
	
2001-04-17  Arturo Espinosa  <arturo@ximian.com>

	* file.pl.in: changed wrong report keys.
	* network-conf.in: smbuse and smbinstalled support.
	* network.pl.in: ditto.
	* service.pl.in (xst_service_sysv_installed): tells if certain service
	  is installed, by looking for the sysv script. Maybe should use rpm or
	  dpkg for this.
	
2001-04-14  Chema Celorio  <chema@celorio.com>

	* time-conf.in (conf_get_replace_table): typo . duh !

	* network-conf.in: ditto
	
	* users-conf.in: add Mandrake 7.2

2001-04-14  Chema Celorio  <chema@celorio.com>

	* time-conf.in: add Mandrake 7.2
	(conf_get_replace_table): link mdk 7.2 to rh 6.2
	(conf_get_parse_table): ditto.

2001-04-11  Bradford Hovinen  <hovinen@ximian.com>

	* xml.pl.in (xst_xml_scan): Call &xst_archive_data

	* general.pl.in (xst_archive_data): Implement. Archive data with
	the Ximian archiver

	* Makefile.am ($(perl_libs)): Add substitution for bin directory

2001-04-03  Hans Petter Jansson  <hpj@ximian.com>

	* shares-conf.in (read_fstab): Fix detection of username for SMB imports.

2001-04-03  Ravi Pratap  <ravi@che.iitm.ac.in>

	* .cvsignore : add mouse-conf.in

2001-04-02  Michael Meeks  <michael@ximian.com>

	* backends/print.pl.in: Revise to simplify

	* backends/print-conf.in: ditto.

2001-03-30  Ravi Pratap  <ravi@che.iitm.ac.in>

	* mouse-conf.in (get, set, filter) : Add
	(xst_mouse_conf_get, xml_print): Implement

2001-03-29  Ravi Pratap  <ravi@che.iitm.ac.in>

	* mouse-conf.in : Add

	* Makefile.am : Modify accordingly

2001-04-02  Hans Petter Jansson  <hpj@ximian.com>

	* shares-conf.in: Generate/parse XML suitable for displaying in e-tables.

2001-04-02  Hans Petter Jansson  <hpj@ximian.com>

	* shares-conf.in: Fixed broken report calls.

2001-04-02  Kenneth Christiansen  <kenneth@gnu.org>

        * perldoc.pl: A JavaDoc like system for Perl
	* option.pl: A module required by the above program.

2001-03-31  Hans Petter Jansson  <hpj@ximian.com>

	* parse.pl.in (xst_parse_fstab): Went back underground, now rumored to
	  be living in filesys.pl.in, under the name xst_filesys_parse_fstab().

2001-03-31  Hans Petter Jansson  <hpj@ximian.com>

	* filesys.pl.in: Added. Implements parsing of fstab and mtab files,
	  and manipulating the information presented by these as in-memory
	  structures.

2001-03-30  Arturo Espinosa Aldama  <arturo@ximian.com>

	* report.pl.in (xst_report): new "::" separated report format.

	* general.pl.in: when asking for report, set $xst_do_report, not
	$xst_do_verbose.

2001-03-29  Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in (xst_xml_scan): Now accepts a filename to scan from. Fallback
	  remains stdin.

2001-03-29  Hans Petter Jansson  <hpj@ximian.com>

	* parse.pl.in (xst_parse_fstab): Don't use -> for hash indirection.

2001-03-29  Hans Petter Jansson  <hpj@ximian.com>

	* parse.pl.in (xst_parse_fstab): Implement.

2001-03-29  Kenneth Christiansen  <kenneth@gnu.org>

        * internet-share: replacement for ishare-launc.pl. Try to follow
          the naming use in /etc/rc.d/rc.init. If you place this file there
          and put the config file in the dir specified in internet-share it
          should be able to run this script at startup.
        * ishare-launch.pl: remove

2001-03-29  Kenneth Christiansen  <kenneth@gnu.org>

        * internet-config.cfg: Template for now an internet config can look
        * ishare-launch.pl: Launcher program that reads the above config file
          and activates the settings.

2001-03-29  Hans Petter Jansson  <hpj@ximian.com>

	* debug.pl.in (xst_debug_print_struct): Print all arguments.
	  (xst_debug_print_struct_r): Indentation correction.

2001-03-29  Simo Sorce  <simo.sorce@polimi.it>

	* shares-conf.in (xml_print): Make XML printing work again.

	* util.pl.in (xst_read_boolean): Ignore case in boolean-denoting strings.

2001-03-29  Arturo Espinosa  <arturo@ximian.com>

	* report.pl.in: Report entries for replace.
	* replace.pl.in: Documented functions, and
	  added report stuff too.
	
2001-03-29  Tambet Ingo  <tambet@ximian.com>

	* users-conf.in (read_shells): Implement.
	(xml_print_shells): Implement.

	* general.pl.in (xst_init): Fixed typo.

2001-03-28  Hans Petter Jansson  <hpj@ximian.com>

	* general.pl.in: Honour --verbose flag like --report.

	* report.pl.in (xst_report): --verbose output is human-readable. Make sure
	  verbose output gets printed independently of report - they're two
	  different requestable output log formats.
	  (xst_report_message): Trivial re-indent of table.

2001-03-28  Arturo Espinosa  <arturo@ximian.com>

	* network.pl.in: smbuse, a feature that reports if
	  the samba daemon is running.
	
2001-03-28  Arturo Espinosa  <arturo@ximian.com>

	* report.pl.in: New report code, which dumps the use
	  of mayor and minor numbers and uses keys instead. A
	  hash, mapping keys to messages is at the end of this
	  file. Fitted progress report with this scheme.

	* *.in: use new reporting code. Some other naming and
	  style corrections I found on the way.
	
2001-03-28  Ryan Boren <rboren@fuzzybelly.org>

	* print.pl.in (xst_printcap_read): parse the ##PRINTTOOL##
	line to grok another description

	* print-conf.in (xml_parse, xml_parse_printer): fixup
	(xml_parse_section): impl.
	(xml_print_printer): add description.

2001-03-26  Tambet Ingo  <tambet@ximian.com>

	* users-conf.in (write_logindefs): Implement.

2001-03-26  Ryan Boren <rboren@fuzzybelly.org>

	* backends/print-conf.in (xst_printcap_read): Fix spool
	naming and contents assumptions.

2001-03-22  Michael Meeks  <michael@ximian.com>

	* backends/print-conf.in (xml_print): don't put redundant
	extra print header and footer in.

2001-03-21  Ryan Boren <rboren@fuzzybelly.org>

	* backends/*: my $var -> my ($var) everywhere

	* backends/*: @_[n] -> $_[n] everywhere

	* backends/network-conf.in: Use qw in places.

	* backends/*: forward -> "forward" etc.

	* backends/parse.pl.in, backeds/replace.pl.in: replace
	\n in regexps with $n.
	
2001-03-21  Michael Meeks  <michael@ximian.com>

	* Makefile.am: add print bits.

	* print-conf.in: Add.

	* print.pl.in: Add.

	* parse.pl.in (xst_shell_escape): split from
	(xst_parse_sh): here.
	(xst_parse_sh_export): impl.

2001-03-21  Tambet Ingo  <tambet@ximian.com>

	* users-conf.in (xml_scan): We need raw xml and slightly modified from xst_xml_scan.
	(save_profiles): Implement.

	* file.pl.in (xst_file_get_data_path): Implement.
	(xst_buffer_save): Now it can write one line of text also.

	* users-conf.in (xml_print_profiles): Don't print empty tags if no profiles defined.

2001-03-20  Arturo Espinosa  <arturo@ximian.com>

	Bug fixes for Debian port to work well.
	
	* network.pl.in (xst_network_interface_activate):
	  renamed to xst_network_interface_active.
	  (xst_network_deb22_get_file): found what this
	  function does. It should trivialy return $dev.
	  (xst_network_deb22_replace_bootproto): "none"
	  is mapped to "static", not the other way. Also,
	  the stanza value to replace is the 2nd, not 3rd.
	  (xst_network_debian_replace_remote_address): the
	  option name is "up", not "on".
	  (xst_network_get_interfaces_parse_table): features
	  not supported by distro are trivialy set to some
	  default value.
	* replace.pl.in (xst_replace_interfaces_get_next_option):
	  backtrack if last lines found were empty lines, so
	  added options get before those, instead of after. Just
	  for beauty.
	  (xst_replace_interface_stanza_value): create stanza
	  if not found. Added missing chomp.
	  (xst_replace_interfaces_option_str): Another missing
	  chomp.
	
2001-03-20  Kenneth Christiansen  <kenneth@gnu.org>

	reviewed by: Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in: Added some my's
	  implimented stack for managing tag containers
	* xml.pl.in(xst_xml_(print|format)_indent): 
	  Made format version
	* xml.pl.in(xst_xml_(print|format)_pcdata: 
	  New function for printing pcdata  
	* xml.pl.in(xst_xml_(print|format)_state_tag): 
	  Made format version, cleaned up a little
	* xml.pl.in(xst_xml_container_enter): New function     
	* xml.pl.in(xst_xml_container_leave): New function
	* xml.pl.in(xst_xml_print_container): New function

2001-03-20  Tambet Ingo  <tambet@ximian.com>

        * users-conf.in: Initial support for profiles.

2001-03-20  Michael Meeks  <michael@ximian.com>

	* xml.pl.in (xst_xml_print_line): print @_ not $_[0] -
	fixes bug in memory conf.

2001-03-19  Michael Meeks  <michael@ximian.com>

	* Makefile.am: Clean.

2001-03-19  Arturo Espinosa  <arturo@ximian.com>

	* file.pl.in (xst_buffer_load): return a ref to an empty
	  array if file not found. This lets the buffer be
	  filled with stuff as soon as the function returns.
	* network.pl.in: some function renaming, a minor
	  prefix usage bug and the interface configuration editting
	  functions and table for Debian 2.2. semi-tested.
	* parse.pl.in: minor code simplification.
	* replace.pl.in: all the debian interfaces file replacers.

2001-03-17  Hans Petter Jansson  <hpj@ximian.com>

	* Added gettext.pl.in by Kenneth Christiansen.

2001-03-16  Arturo Espinosa  <arturo@ximian.com>

	* Network parsing works fully for Debian. Tested on Poiss.
	* network.pl.in (xst_network_active_interfaces_get): fixed
	  network discovery command.
	  (xst_network_interfaces_get_existing): get existing ifaces
	  for Debian.
	  (xst_network_debian_get_file): counterpart of a useless
	  function. :)
	  (xst_network_get_chap_passwd): deleted. Useless.
	  (xst_network_get_ppp_options_re): general function to get
	  options from pppd option files.
	  (xst_network_get_ppp_options_unsup): get unknown options.
	  (xst_network_debian_parse_remote_address): cool hack that
	  allows plip existance under Debian.
	  Some parse and replace table beautifying.
	* parse.pl.in (xst_parse_replace_hash_values): more flexible
	  replacing. New syntax is %has_value%, anywhere on the param.
	  Check the interface parse table for Debian for an example.
	  (xst_parse_trivial): Just return the arguments.
	  Modified return value for all line parsers: the old method
	  regarded a line containing "-1" as EOF. Now returning
	  a refference to the string, or -1 if EOF.
	  (xst_parse_split_ref): returns -1 if key not found.
	  (xst_parse_split): now calls xst_parse_split_ref, and generates
	  old behaviour.
	  (xst_parse_kw): look for a keyword matching $re, reporting
	  existence.
	  (xst_parse_chat): minor nesting simplification.
	  Other minor bugs.
	* report.pl.in: Perl style change. @array[index] -> $array[index]

	
2001-03-15  Arturo Espinosa  <arturo@ximian.com>

	* network-conf.in: Added supported platform "debian-2.2".
	  Removed RH-dependent gateway and gateway_dev params.
	* network.pl.in (xst_network_active_interfaces_get):
	  improved ifconfig call and filter.
	  (xst_network_debian_parse_bootproto): bootproto translation
	  from interfaces file for a given iface in Debian.
	  Added Debian parsing tables and general network replace
	  table.
	* parse.pl.in: Lots of stuff here. Basicly parsing functions
	  for the Debian interfaces file.
	* platform.pl.in (check_debian): changed quotes to double
	  quotes. $xst_dist appeared as debian-$ver!
	
2001-03-15  Hans Petter Jansson  <hpj@ximian.com>

	* test.pl: Added test skeleton.

2001-03-13  Hans Petter Jansson  <hpj@ximian.com>

	* boot-conf.in: Modernize XML printing - do all output through
	  xst_xml_print_* calls.

	* network-conf.in: Ditto.

	* time-conf.in: Ditto.

	* users-conf.in: Ditto.

2001-03-13  Hans Petter Jansson  <hpj@ximian.com>

	* boot-conf.in: Remove calls to xst_begin() - it's invoked by
	  xst_init(). Unfortunately this makes the code asymmetric, but if
	  we were to invoke it ourselves, we'd also have to call
	  xst_platform_ensure_supported() in three places.

	* network-conf.in: Ditto.

2001-03-13  Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in (xst_xml_print_state_tag): Renamed from
	  xst_xml_print_state. Removed spurious indent.
	
	* disks-conf.in (xml_print): Use xst_xml_print_state_tag instead of
	  direct print..

	* media.pl.in (xst_media_xml_print): Use xst_xml_print_state_tag.

2001-03-13  Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in (xst_xml_print_begin): Implement.
	  (xst_xml_print_end): Implement.
	  (xst_xml_print_indent): Use xst_xml_print_string.
	  (xst_xml_print_vspace): Use xst_xml_print_string.
	  (xst_xml_print_state): Use xst_xml_print_string.

	* disks-conf.in (xml_print): Use xst_xml_print_(begin|end).

2001-03-13  Hans Petter Jansson  <hpj@ximian.com>

	* debug.pl.in: Fixed bug, debug 9 was not being rotated out.

2001-03-12  Arturo Espinsoa  <arturo@ximian.com>

	* network.pl.in: using debug functions for messages.
	* parse.pl.in: same
	* replace.pl.in: quote backquote also in replace_sh.
	* xml.pl.in: &quot; was being transformed into \'. Should
	  be ' only. Fixed.
	
2001-03-12  Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in (xst_xml_indent): -> xst_xml_print_indent.
	  (xst_xml_vspace): -> xst_xml_print_vspace.
	  (xst_xml_print_string): Implement.
	  (xst_xml_print_line): Use xst_xml_print_string().

	* boot-conf.in disks-conf.in hardware-conf.in
	  media.pl.in memory-conf.in network-conf.in
	  removable-media.pl.in time-conf.in users-conf.in:

	  xst_xml_indent -> xst_xml_print_indent.
	  xst_xml_vspace -> xst_xml_print_vspace.

2001-03-08  Arturo Espinosa  <arturo@ximian.com>

	* service.pl.in: New functions to handle SysV rc
	  scripts, a little better organized code.
	* time-conf.in: Use xst_service_sysv_set_status
	  and get_status now.
	* Removing networking-conf.in, nameresolution-conf.in
	  and network-conf.in.bak.

	
2001-03-08  Hans Petter Jansson  <hpj@ximian.com>

	* file.pl.in (xst_open_read_from_names): Missing $ in var for
	  debug output corrected.

2001-03-08  Hans Petter Jansson  <hpj@ximian.com>

	* boot-conf.in disks-conf.in hardware-conf.in media.pl.in
          memory-conf.in nameresolution-conf.in network-conf.in
          networking-conf.in removable-media.pl.in time-conf.in
          users-conf.in xml.pl.in: xst_xml_print -> xst_xml_print_line.

	  Doing this replace first, in a way that shouldn't affect the
	  handful of other functions starting with xst_xml_print_.

2001-03-08  Hans Petter Jansson  <hpj@ximian.com>

	* replace.pl.in (xst_replace_ini): Use debug funcs.
	  (is_array_ref): Use debug funcs.

2001-03-08  Arturo Espinosa  <arturo@ximian.com>

	* time-conf.in (time_set_local_time, time_set_rh62_zone,
	time_rh62_service_set_status, conf_set): replace functions.
	Not tested yet.
	* time-conf.in (time_get_local_time): bad order in scalar
	assignment. fixed.
	* time-conf.in (xml_print): mistakingly deleted timezone
	printing. fixed.
	
2001-03-08  Hans Petter Jansson  <hpj@ximian.com>

	* Makefile.am: Remove nameresolution-conf relics.

2001-03-08  Hans Petter Jansson  <hpj@ximian.com>

	* general.pl.in: Add $xst_debug flag.
	  (xst_init): Honour --debug arg and XST_DEBUG env. Also some
	  comments.

	* debug.pl.in (xst_debug_print_indent): Use xst_debug_print_string().
	  (xst_debug_print_string): Print to STDERR only if $xst_debug set.

2001-03-08  Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in (xst_xml_quote): return() -> return, makes code look
	  more uniform.
	  (xst_xml_get_word): Missing semicolon added.
	  (xst_xml_get_text): Missing semicolon added.

2001-03-08  Hans Petter Jansson  <hpj@ximian.com>

	* debug.pl.in (xst_debug_open_output_file): Implement.
	  (xst_debug_print_string_to_file): Implement.
	  (xst_debug_print_indent): Print to file. More efficient.
	  (xst_debug_rotate_try): Fix bug that would lead to multiple
	  rotations on one backend invocation.

	* file.pl.in (xst_open_read_from_names): Use debug funcs.
	  (xst_buffer_save): Use debug funcs.

	* xml.pl.in (xst_xml_scan): Dump scanned XML to in.xml.
	  (xst_xml_get_pcdata): Use debug funcs.

2001-03-07  Arturo Espinosa  <arturo@ximian.com>

	* replace.pl.in (xst_replace_from_table): big oops here. A
	  line of old code (51) wasn't deleted and this prevented any
	  changes to take place.
	* network.pl.in (xst_network_ensure_loopback_interface): Ensure
	  the interface is activated if it already exists.
	* parse.pl.in: line analyzers take care of reading the file, so
	  we can have routines that read more than one line, etc.
	* time-conf.in: replace table, but this isn't working yet.
	
	
2001-03-06  Arturo Espinosa  <arturo@ximian.com>

	* network-conf.in: moved xml_print stuff to xml.pl.in. Removed
	  stale set_immediate code.
	* parse.pl.in: xst_parse_replace files. Now it is possible to
	  pass a reference to an array with several files to be replaced
	  from the fn hash. Check time-conf.in (conf_get_parse_table) for
	  an example.
	  (xst_parse_chomp_line_std, xst_parse_chomp_line_hash_comment):
	  line reading routines. The latter remove hash comments.
	  (xst_parse_split): now receives a ref to a sub for the line
	  reading sub, with xst_parse_chomp_line_std as default.
	  (xst_parse_*): pass the line_read_proc param all around.
	* replace.pl.in (xst_replace_from_table): same as xst_parse_replace.
	* time-conf.in: an almost complete rewrite. XML structure changed a
	  bit.
	* xml.pl.in: moved the xst_xml_print* subs here. Renamed xml_print_hash
	  to xst_xml_print_hash_hash, and created new xst_xml_print_hash,
	  which does what its name says.
	
2001-03-05  Hans Petter Jansson  <hpj@ximian.com>

	* file.pl.in (xst_file_get_debug_path): Implement.

2001-03-05  Hans Petter Jansson  <hpj@ximian.com>

	* disks-conf.in: Added redhat-7.0.

2001-03-05  Hans Petter Jansson  <hpj@ximian.com>

	* debug.pl.in: Implement xst_debug_rotate_try().

2001-03-02  Arturo Espinosa  <arturo@ximian.com>

	* network.pl.in: add loopback interface if it doesn't exist
	  (ensure_loopback). Add "localhost" and "localhost.localdomain"
	  entries to loopback statichost entry.
	
2001-03-01  Hans Petter Jansson  <hpj@ximian.com>

	* debug.pl.in: Implemented basic debug functions.
	* Makefile.am: Included debug.pl.in in build and install.

2001-03-01  Arturo Espinosa  <arturo@ximian.com>

	* file.pl.in (xst_run): run command with sh -c.
	* network.pl.in (xst_network_interface_active): make interface discovery
	  platform indpenedent: old method couldn't detect if ifconfig failed.
	
2001-02-28  Hans Petter Jansson  <hpj@ximian.com>

	* disks-conf.in (read_fstab, write_fstab): Don't touch UUID= either.

2001-02-28  Arturo Espinosa  <arturo@ximian.com>

	* file.pl.in (xst_open_write_from_names): old criterion was preventing
	  file creation. Create file if it doesn't exist, under any condition.
	
2001-02-28  Hans Petter Jansson  <hpj@ximian.com>

	* disks-conf.in (read_fstab, write_fstab): Don't touch LABEL= lines
	  for now.

2001-02-27  Chema Celorio  <chema@celorio.com>

	* boot.pl.in (xst_boot_conf_set): fix a small typo

2001-02-27  Arturo Espinosa  <arturo@ximian.com>

	* network-conf.in (xml_parse_network): support winsuse boolean.
	* network.pl.in (xst_network_get_replace_table, parse_table): winsuse.
	* parse.pl.in (xst_parse_ini_bool): get a boolean from an ini file.
	* replace.pl.in (xst_replace_ini_bool): save a boolean...
	* xml.pl.in (xml_get_pcdata): return "" if tag doesn't have contents.
	
2001-02-26  Chema Celorio  <chema@celorio.com>

	* Makefile.am (perl_libs): remove be.pl

2001-02-27  Tambet Ingo  <tambet@ximian.com>

	* boot-conf.in (set_immediate): New function, we didn't actually run lilo before.

2001-02-26  Arturo Espinosa  <arturo@ximian.com>

	* network-conf.in (xml_parse_dialing): set the file item if none came from the XML.
	* network.pl.in (xst_network_rh62_get_file, xst_network_get_file): check the file
	  name for any given distro. The corresponding sysconfig file for rh62.
	
2001-02-26  Tambet Ingo  <tambet@ximian.com>

	* boot-conf.in (xml_parse_image): get text (not word).

	* boot.pl.in (xst_boot_conf_replace_image): Fixed bug that sometimes didn't write
	type. Don't scan to the end of file if everything is done already. 

2001-02-25  Hans Petter Jansson  <hpj@ximian.com>

	* general.pl.in (xst_begin): Don't break if platform unknown -
	  let xst_platform_ensure_supported () handle that.

	* platform.pl.in (xst_platform_ensure_supported): Make
	  unknown-platform and unsupported-platform scenarios similar.

2001-02-24  Arturo Espinosa  <arturo@ximian.com>

	* network.pl.in: peerdns support.
	* util.pl.in (xst_util_struct_eq): oops, forgot to rename inner calls.
	
2001-02-24  Arturo Espinosa  <arturo@ximian.com>

	* network-conf.in (xml_print): cosmetic changes.
	* network.pl.in (xst_network_rh62_interface_set_by_dev,
	xst_network_rh62_interface_set) better criterion for device activation.
	* network.pl.in: chap support, lots of bug fixes to activation stuff.
	* util.pl.in (xst_util_struct_eq): renamed from cmp due to different semantic.
	
2001-02-23  Hans Petter Jansson  <hpj@ximian.com>

	* file.pl.in (xst_file_get_base_path): Implement.
	  (xst_file_get_tmp_path): Implement.
	  (xst_file_get_backup_path): Implement.
	  (xst_backup_file): Use xst_file_get_backup_path.
	  (xst_open_filter_write_from_names): Use xst_file_get_tmp_path.

2001-02-23  Arturo Espinosa  <arturo@ximian.com>

	* replace.pl.in (xst_replace_sh): surround by quotes after escaping.
	
2001-02-23  Arturo Espinosa  <arturo@ximian.com>

	* network-conf.in (xml_parse-dialing): minor naming change.
	* network.pl.in (xst_network_dialing_set): "Stupid mode" corresponding tag
	  is "stupid", not "mode". This was causing the "= 0" bug.
	* replace.pl.in (xst_replace_ini): Forgot the case where you found the
	  section, but not the var. Handle this.
	
2001-02-23  Arturo Espinosa  <arturo@ximian.com>

	* file.pl.in (xst_open_read_from_names): debug reporting opened file,
	  but with the xst_prefix also.
	* network-conf.in: use xst_xml_get_pcdata instead of get_word.
	* network.pl.in (xst_network_sysconfig_ifaces_get_existing): use xst_prefix
	  to open directory.
	* network.pl.in: added "file" attrib to interface structures, to know from
	  which file an interface configuration came. This tag could be the same
	  value accross all interfaces for some distros (RH required, dunno others).
	* network.pl.in (xst_network_interfaces_down_changed): get active interfaces
	  and deactivate only those whose data have changed.
	* network.pl.in (xst_network_interfaces_set): now requires the OLD_HASH
	  structure, so that interfaces_down_changed can compare.
	* network.pl.in (xst_network_conf_set): call xst_network_conf_get to get the
	  $old_hash, and pass it to replace_from_table.
	* replace.pl.in (xst_replace_from_table): $$fn{"OLD_HASH"} = $old_hash;, so
	  if you ask for the OLD_HASH file key, you get a reference to the $old_hash.
	  See network.pl.in (xst_network_get_replace_table) for an example.
	* replace.pl.in (xst_replace_ini): cosmetic change to new section appending.
	* util.pl.in (xst_util_struct_cmp): recursively compare two references,
	  diving into any references to scalars, arrays or to see if structs are equal.
	* xml.pl.in (xst_xml_get_pcdata): get the contents of the element, with no
	  processing, except for entity unquoting.
	* xml.pl.in (xst_xml_get_word, xst_xml_get_text, xst_xml_get_size): they now
	  call get_pcdata and then process that to their need, then return.
	
	
2001-02-23  Hans Petter Jansson  <hpj@ximian.com>

	* file.pl.in (xst_backup_file): Add permanent archival of first-ever
	  backup made.

2001-02-23  Hans Petter Jansson  <hpj@ximian.com>

	* file.pl.in (xst_rotate_backups): Remove.
	  (xst_backup_file): Implement.
	  (xst_create_path): Implement.
	  (xst_create_path_for_file): Implement from old xst_create_path.
	  (xst_open_write_from_names): Use xst_backup_file.
	  (xst_open_filter_write_from_names): Use xst_backup_file. Use new
	  filter source (in private tmp directory).

	* time-conf.in (write_localtime): Use xst_create_path_for_file.

2001-02-23  Tambet Ingo  <tambet@ximian.com>

	* boot.pl.in (xst_boot_conf_replace_image): We are #XstPartitionType aware.
	(xst_boot_parse_images): We too!
	(xst_boot_conf_del_images): Taught deleting images.
	(xst_boot_conf_set_images): Use copy of data, not data itself, call del_images.
	(xst_boot_conf_replace_image): Made image matching stronger.

2001-02-22  Arturo Espinosa  <arturo@ximian.com>

	* network.pl.in (xst_network_get_pap_passwd): get the pap password from a pap-secrets file.
	  The tag name for dialing dialers passwords is now password, not passwd.
	* parse.pl.in: don't use @_ to pass arguments: it's difficult to know the required args
	  for the function. xst_parse_sh now unquotes the value.
	* replace.pl.in (xst_replace_sh): quote value and surround by quotes if required, before replacing.
	
2001-02-22  Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in (xst_xml_scan_recurse) (xst_xml_scan_make_kid_array):
	  Allow [0-9] in tag names.

2001-02-22  Tambet Ingo  <tambet@ximian.com>

	* boot.pl.in (xst_boot_conf_set): Added some more known tags.

2001-02-22  Hans Petter Jansson  <hpj@ximian.com>

	* report.pl.in (xst_report): Re-enable report printing. It works.

	* shares-conf.in (xml_print): Move to xst_xml_quote ().

2001-02-22  Tambet Ingo  <tambet@ximian.com>

	* boot.pl.in (xst_boot_conf_replace_image): Now we can delete image tags too.

2001-02-22  Hans Petter Jansson  <hpj@ximian.com>

	* xml.pl.in (xst_xml_quote): Put old code back in, since Chema's
	  didn't work.

2001-02-22  Chema Celorio  <chema@celorio.com>

	* boot-conf.in (xml_print_globals): fix s/quote/xst_xml_quote
	so that Crimz can stop crying like a baby

2001-02-21  Arturo Espinosa  <arturo@ximian.com>

	* network.pl.in (xst_network_interfaces_set, xst_network_rh62_interface_delete,
	  xst_network_remove_pap_entry): remove interfaces that are not present, and remove
	  pap entry if the interface used one, for security.
	* network.pl.in (xst_network_remove_pap_entry): used when a ppp interface is removed,
	  for security.
	  (xst_network_rh62_interface_delete): entry removal in rh62ish machines.
	  DNS1 and DNS2 support in tables.
	
2001-02-21  Chema Celorio  <chema@celorio.com>

	* users-conf.in (xml_print): quote the group too.

2001-02-21  Chema Celorio  <chema@celorio.com>
	
	* users-conf.in : replace the plaint_to_entities & entities
	to plain with xst_xml_quote & xst_xml_unquote
	(xml_print): quote the user data before sending it
	to the front end.

	* boot-conf.in (quote): remove use xst_xml_quote
	(unquote): remove use xst_xml_unquote

	* xml.pl (xst_xml_entities_to_plain): remove, use xst_xml_unquote
	(xst_xml_plain_to_entities): remove use xst_xml_quote instead

2001-02-21  Chema Celorio  <chema@celorio.com>

	* report.pl.in (xst_report): return, don't report status. This was
	causing a bug (which took me 3 hrs. to find) in the backends.

2001-02-21  Tambet Ingo  <tambet@ximian.com>

	* boot.pl.in (xst_boot_set_global_kw): New fn to add or modify global keywords.
	(xst_boot_set_global): New fn to add or modify globals (repsects all spaces).
	(xst_boot_del_global): Nef fn to delete globals (keywords and vars).
	(xst_boot_replace_from_table): My own version of xst_replace_from_table.
	(xst_boot_conf_set_images): Rewrote this and
	(xst_boot_conf_replace_image): this.
	(xst_boot_conf_replace_image): Now it adds new images too.

2001-02-20  Tambet Ingo  <tambet@ximian.com>

	* boot.pl.in (xst_boot_parse_images): New (and nice) function to get images.

	* boot-conf.in (xml_print_global_kws): New function, splitted from 
	(xml_print_globals), added more known tags.

	* boot.pl.in (xst_boot_conf_get): Use those new functions.
	(xst_boot_parse_global_kw): New function to parse global lilo.conf keyword.
	(xst_boot_parse_global): New function to parse global lilo variable.

2001-02-19  Chema Celorio  <chema@celorio.com>

	* be.pl.in (xst_buffer_save): remove this function it is
	duplicated in file.pl
	(xst_buffer_load): ditto
	(xst_buffer_clean): ditto

2001-02-19  Arturo Espinosa  <arturo@ximian.com>

	* network.pl: Ensure local host entry, by checking the internal
	  structures before writing. Run hostname.

2001-02-16  Hans Petter Jansson  <hpj@ximian.com>

	* report.pl.in: Make sure the same progress int is not printed twice.

2001-02-16  Hans Petter Jansson  <hpj@ximian.com>

	* platform.pl.in: Silence stderr output, disable early abort code.

2001-02-15  Arturo Espinosa  <arturo@ximian.com>

	* xml.pl.in: substitute &amp; entity too.

2001-02-13  Hans Petter Jansson  <hpj@ximian.com>

	* gen-reportcode-list.sh: Look in *.pl.in as well.
	* general.pl.in, platform.pl.in: Report fixups.

2001-02-12  Arturo Espinosa Aldama  <arturo@ximian.com>

	* network.pl.in: (xst_network_get_interface_{replace,parse}_table) added iface name support.
	
2001-02-12  Hans Petter Jansson  <hpj@ximian.com>

	* shares-conf.in: Fixed bug which would cause [global] section to
	  not be written in some cases.

2001-02-10  Arturo Espinosa Aldama  <arturo@ximian.com>

	* network.pl.in: (xst_network_get_interface_{replace,parse}_table) added wvdial support.
	  (xst_network_ensure_local_host_entry) changed name: added "network" prefix.
	  (xst_network_dialing_set) save the wvdial configuration.
	* network-conf.in: (xml_print_hash) a more general instance of xml_print_interfaces, to
	  handle both interfaces and dialing.
	  (xml_parse_dialing) parse the wvdial configuration from XML to internal hash.
	
2001-02-09  Hans Petter Jansson  <hpj@ximian.com>

	* *-conf.in: Added platform comparisons and die if necessary.

2001-02-09  Hans Petter Jansson  <hpj@ximian.com>

	* platform.pl.in: (xst_platform_ensure_supported): Implement.

2001-02-09  Hans Petter Jansson  <hpj@ximian.com>

	* *.in: Removed -*-perl-*- lines that were confusing Emacs.

2001-02-09  Arturo Espinosa <arturo@ximian.com>

	* network-conf.in: removed a bunch of set_* functions, whose functionality
	  already is in network.pl.in.
	* network.pl.in: almost finished, lots of bug fixes. added bootproto support.
	* replace.pl.in: xst_replace_chat implemented.
	* network.pl.in, replace.pl.in: fixed conflicts with new general function namings.
	* network.pl.in: (xst_network_dialing_get) wvdialer parsing support. Minor indentation fix.
	* parse.pl.in: fix to ini parser and new parser to get ini sections.
	* replace.pl.in: similar fix to ini replacer, and minor indentation fix.
	
2001-02-08  Hans Petter Jansson  <hpj@ximian.com>

	* shares-conf.in: Added missing dependency on service.pl.

2001-02-08  Tambet Ingo  <tambet@ximian.com>

	* boot.pl.in: New file.
	* boot-conf.in: Removed stuff which is in boot.pl.in.

2001-02-07  Hans Petter Jansson  <hpj@ximian.com>

	* be.pl.in, boot-conf.in, disks-conf.in, file.pl.in, 
	  gen-reportcode-list.sh, general.pl.in, guess_system.sh, 
	  hardware-conf.in, media.pl.in, memory-conf.in, 
	  nameresolution-conf.in, network-conf.in, network.pl.in, 
	  networking-conf.in, parse.pl.in, platform.pl.in, 
	  removable-media.pl.in, replace.pl.in, report.pl.in, 
	  service.pl.in, shares-conf.in, time-conf.in, users-conf.in,
	  util.pl.in, xml.pl.in: be_ -> xst_

2001-02-07  Hans Petter Jansson  <hpj@ximian.com>

	* be.pl.in: Refactored into obsoletion.

	* file.pl.in, general.pl.in, platform.pl.in, report.pl.in,
	  service.pl.in, util.pl.in, xml.pl.in: Added.

	* boot-conf.in, disks-conf.in, memory-conf.in,
	  network-conf.in, shares-conf.in, time-conf.in, users-conf.in,
	  media.pl.in, network.pl.in, parse.pl.in, replace.pl.in:
	  Removed dependency on be.pl. Added new dependencies.

	* Makefile.am: Removed be.pl from distribution (but not
	  build). Added new targets.

	* removable-media.pl.in: Added an XML skeleton. This file will
	  go away later, though.

2001-02-07  Hans Petter Jansson  <hpj@ximian.com>

	* network.pl.in: Separated the parse/replace tables from the rest
	  of the code. They are now returned by get_table functions that
	  pick the table depending on the platform.

2001-02-07  Hans Petter Jansson  <hpj@ximian.com>

	* be.pl.in: Redid the platform naming scheme, added switch for
	  manual override.

2001-02-06  Hans Petter Jansson  <hpj@ximian.com>

	* media.pl.in: (xst_media_xml_print): Implement.

2001-02-06  Hans Petter Jansson  <hpj@ximian.com>

	* be.pl.in: (be_xml_print_state): Implement.

2001-02-06  Tambet Ingo  <tambet@ximian.com>

	* boot-conf.in: Get some more stuff out of lilo.conf

2001-02-06  Hans Petter Jansson  <hpj@ximian.com>

	* shares-conf.in: Disabled scanning so that UI testing becomes
	  less of a pain. Will have to work out a switch to enable it
	  later.

2001-02-06  Hans Petter Jansson  <hpj@ximian.com>

	* Makefile.in: Added media.pl to the list of targets.

2001-02-06  Arturo Espinosa  <arturo@ximian.com>

	* replace.pl.in: xst_replace_join_hash, the last of the replacing
	  functions for network to be finished.
	* network-conf.in: bug in xml_parse_network for nameserver and 
	  searchdomain.
	* General bug fixes on all the new code and other parts.
	* All general network param writing is ready. Interfaces is the only 
	  missing.
	

2001-02-06  Arturo Espinosa  <arturo@ximian.com>

	* be.pl.in: be_buffer_clean, be_buffer_join_lines: new functions to
	  help with in-line editting.
	* network-conf.in: support for "auto" and "description" tags when
	  parsing: forgot these.
	* network.pl.in: xst_map_dist -> be_map_dist, pass the hash with
	  the configuration to the replace_with_table function.
	* replace.pl.in: Lots of code, for writing configuration. Partialy
	  tested, but hash replacing is missing still.

2001-02-05  Tambet Ingo  <tambet@ximian.com>

	* Makefile.am (backends): Added boot-conf into build

	* boot-conf.in: New file.

2001-02-05  Arturo Espinosa  <arturo@ximian.com>

	* be.pl.in: (be_buffer_{load,save}): load a file into an array buffer
	and save it back.
	(be_map_dist): moved from network.pl.in.
	* network.pl.in: minor & typos.
	* replace.pl.in: routines for in-line replacing.
	* Makefile.am: install replace routines.
	* .cvsignore: ignore replace routines .pl file.

2001-02-05  Hans Petter Jansson  <hpj@ximian.com>

	* parse.pl.in (xst_parse_split): Keep all tokens on line
	  associated with key.

	* media.pl.in: Added.

	* removable-media.pl.in: Added.

2001-02-04  Hans Petter Jansson  <hpj@ximian.com>

	* parse.pl.in (xst_parse_line_first): Stopped from losing return value.
	  Added & prefix to function call. Close file when done.
	* parse.pl.in (xst_parse_chat): Prevented $found from being global.
	  Close file when done.

2001-01-31  Tambet Ingo  <tambet@ximian.com>

	* users-conf.in (xml_print_nis): test function for nis.

2001-01-28  Arturo Espinosa  <arturo@ximian.com>

	* *-conf.in, *.pl.in: added emacs style directives.

2001-01-28  Hans Petter Jansson  <hpj@ximian.com>

	* be.pl.in: Added disaster recovery, with 9 rotated backups.
	  Removed some bogus debug output someone left behind.

2001-01-26  Arturo Espinosa  <arturo@ximian.com>

	* network-conf.in: parsing now follows the new hash structure.

2001-01-26  Chema Celorio  <chema@celorio.com>

	* be.pl.in: if $verbose, print the file name before it is
	opened

2001-01-25  Arturo Espinosa  <arturo@ximian.com>

	* new_network-conf.in, network.pl.in, parse.pl.in: completly new
	  network code and parsing routines.
	* network-conf.in: overwrote with new_network-conf.in and cvs
	  removing new_network-conf.in. Saving a backup, though.

2001-01-22  Arturo Espinosa  <arturo@ximian.com>

	* add_amp.sh: dumb program that fixes missing & when calling
	  functions in perl code.
	* *-conf.in and be.pl.in: passed through add_amp.sh.

2001-01-18  Chema Celorio  <chema@celorio.com>

	* TODO: deleted

2001-01-18  Arturo Espinosa <arturo@ximian.com>

	* be.pl.in: be_network_get_redhat now gives away more info. Same
	  should be done for debian and SuSE.
	* network-conf.in: be_ppp_get_phone_redhat is called from
	  be_network_get_redhat to obtain the phone pppd dials.
	
2001-01-17 Tambet Ingo  <tambet@ximian.com>

	* Changelog: fixed my revious wacky entry. 

2001-01-17  Arturo Espinosa <arturo@ximian.com>

	* network-conf.in: print and parse interface tags. Also bring up
	  or down network interfaces, and report their status when printing.
	
2001-01-16  Arturo Espinosa <arturo@ximian.com>

	* network-conf.in: network backend.
	* guess_system.sh: stolen from autoconf, a script to tell the
	system the backends are running on.
	* Makefile.am: install guess_system.sh where be.pl goes.
	* be.pl.in: need to replace ___scriptsdir___ here too, so I removed
	  be.pl and have this one for preprocessing.

2001-01-16  Tambet Ingo  <tambet@ximian.com>

	* memory-conf.in: Added debugging support. Got rid of hardcoded tool
	  locations, made it using be_locate_tool. Switched hardcoded 
	  /proc/meminfo to variable. Get all sizes in format %.1f to unify
	  with frontend.

2001-01-16  Chema Celorio  <chema@celorio.com>

	* time-conf.in (get_zone): when scanning for timezones
	only do a system "diff ..." if the file size matches the
	timezone we are looking for. This reduces loading time.

	* Added ChangeLog 
	
